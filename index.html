<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Turtles</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://api.fontshare.com/v2/css?f[]=satoshi@1,400,500,600,700&f[]=array@400&display=swap" rel="stylesheet" />
    <link rel="apple-touch-icon" sizes="180x180" href="https://assets.guns.lol/favicon/apple-touch-icon.png" onerror="this.href='https://placehold.co/180x180/000000/FFFFFF?text=Favicon'"/>
    <link rel="icon" type="image/png" sizes="32x32" href="https://assets.guns.lol/favicon/favicon-32x32.png" onerror="this.href='https://placehold.co/32x32/000000/FFFFFF?text=Fav'"/>
    <link rel="icon" type="image/png" sizes="16x16" href="https://assets.guns.lol/favicon/favicon-16x16.png" onerror="this.href='https://placehold.co/16x16/000000/FFFFFF?text=F'"/>
    <link rel="manifest" href="https://assets.guns.lol/favicon/site.webmanifest" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="‎Turtles' BioLink page." />
    <meta name="author" content="Turtles" />
    <meta property="og:title" content="Turtles | BioLink" />
    <meta property="og:description" content="‎Check out my links!" />
    <meta property="og:image" content="https://r2.guns.lol/d7f557ab-4318-4368-bc8e-b08bdfb983bc.jpg" onerror="this.src='https://placehold.co/1200x630/000000/FFFFFF?text=OG+Image'"/>
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Turtles | BioLink" />
    <meta name="twitter:description" content="‎Check out my links!" />
    <meta name="twitter:image" content="https://r2.guns.lol/d7f557ab-4318-4368-bc8e-b08bdfb983bc.jpg" onerror="this.src='https://placehold.co/1200x600/000000/FFFFFF?text=Twitter+Image'"/>

    <style>
        body {
            font-family: 'Satoshi', 'Inter', sans-serif;
            background-color: #000000; /* Ensure background is dark for snowflakes */
            color: #ffffff;
            overflow-x: hidden; 
        }
        ::selection { background: #ffffff; color: #000000; }
        ::-moz-selection { background: #ffffff; color: #000000; }

        :root {
            --textColor: #ffffff;
            --textColorDarker: rgba(255, 255, 255, 0.7);
            --iconColor: #ffffff; /* Kept for potential future use, badges removed */
            --joinStatus: rgba(255, 255, 255, 0.65);
            --avatarBorderColor: rgba(80, 80, 80, 0.5);
            --containerRadius: 20px;
            --containerWidth: 44rem;
            --containerPaddingX: 23px;
            --containerPaddingY: 27px;
            --colorUsernameGlow: 0px 0px 16.5px #ffffff;
            --buttonUrlColor: rgba(200, 200, 255, 0.75);
        }
        .font-array { font-family: 'Array', 'Inter', sans-serif; }
        .text-glow { text-shadow: var(--colorUsernameGlow); }
        /* .badge-icon svg was removed as badges are removed */
        .social-icon-link img { transition: transform 0.2s ease-in-out; }
        .social-icon-link:hover img { transform: scale(1.15); } /* Slightly increased hover scale */

        .main-container {
            background-color: rgba(50, 50, 50, 0.05); /* Frosted glass: 5% opacity */
            backdrop-filter: blur(15px); /* Frosted glass: 15px blur */
            -webkit-backdrop-filter: blur(15px); /* Safari support */
            border: 1px solid rgba(255, 255, 255, 0.10); /* Adjusted border for definition */
        }

        .profile-widget { 
            background-color: rgba(0,0,0,0.3); /* Slightly darker widget background */
            border: 1px solid rgba(255,255,255,0.12);
            padding: 1rem; 
            border-radius: var(--containerRadius); 
            margin-bottom: 1.5rem; 
        }

        .snowflake { 
            position: fixed; /* Changed to fixed to ensure they cover viewport */
            top: -20px; 
            color: #fff; 
            font-size: 1.5rem; 
            user-select: none; 
            pointer-events: none; 
            opacity: 0.6; /* Slightly reduced opacity */
            animation: fall linear infinite; 
            z-index: -1; /* Behind other content */
        }
        @keyframes fall { 
            0% { transform: translateY(-5vh) rotate(0deg); opacity: 0.6; }
            100% { transform: translateY(105vh) rotate(360deg); opacity: 0; } 
        }

        #page-entry-text { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 60px; font-weight: 700; color: var(--textColor); opacity: 0; animation: fadeInOut 3s ease-in-out forwards; z-index: 1000; }
        @keyframes fadeInOut { 0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); } 25% { opacity: 1; transform: translate(-50%, -50%) scale(1); } 75% { opacity: 1; transform: translate(-50%, -50%) scale(1); } 100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); } }
        
        .typewriter-text .cursor { display: inline-block; background-color: var(--textColor); margin-left: 0.1em; width: 3px; animation: blink 1s infinite; height: 1em; vertical-align: text-bottom; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

        .status-dot { width: 10px; height: 10px; border-radius: 50%; display: inline-block; margin-right: 6px; }
        .status-online { background-color: #43b581; box-shadow: 0 0 5px #43b581; }
        .status-idle { background-color: #faa61a; box-shadow: 0 0 5px #faa61a; }
        .status-dnd { background-color: #f04747; box-shadow: 0 0 5px #f04747; }
        .status-offline { background-color: #747f8d; box-shadow: 0 0 5px #747f8d; }

        .roblox-description {
            font-size: 0.8rem; /* Smaller font for description */
            color: var(--textColorDarker);
            margin-top: 0.25rem; /* Small space above description */
            max-height: 4.8em; /* Limit height to about 3-4 lines */
            overflow-y: auto; /* Allow scrolling if description is too long */
            line-height: 1.6;
        }


        @media (max-width: 768px) { 
            #page-entry-text { font-size: 50px; }
        }
        @media (max-width: 720px) {
            .main-container { width: 95% !important; padding-left: 15px !important; padding-right: 15px !important; }
            .profile-layout { flex-direction: column !important; align-items: center !important; text-align: center; }
            .profile-text-content { margin-left: 0 !important; margin-top: 1rem !important; align-items: center !important; }
            .username-text { font-size: 28px !important; }
            .description-text { font-size: 15px !important; }
            .social-links-container { justify-content: center !important; }
        }
         @media (max-width: 430px) {
            .main-container { width: 100% !important; border-radius: 0 !important; min-height: 100vh; border-left: none; border-right: none; }
             #page-entry-text { font-size: 40px; }
        }
    </style>
</head>
<body class="bg-black text-white flex flex-col items-center justify-center min-h-screen p-0 sm:p-4 selection:bg-white selection:text-black">
    <div id="snowflake-container" aria-hidden="true"></div>
    <div id="page-entry-text">𓆉</div>

    <div class="main-container relative flex flex-col items-center p-[var(--containerPaddingY)] px-[var(--containerPaddingX)] rounded-none sm:rounded-[var(--containerRadius)] max-w-[var(--containerWidth)] w-full transition-all duration-300" style="--containerRadius: 20px; --containerWidth: 44rem; --containerPaddingX: 23px; --containerPaddingY: 27px;">
        
        <div class="profile-section flex items-start w-full mb-6 profile-layout">
            <div class="avatar-container flex-shrink-0">
                <img src="https://r2.guns.lol/d4b26a4d-5241-4092-934c-02d1750a825b.webp" 
                     alt="Turtles Avatar" 
                     class="w-28 h-28 md:w-32 md:h-32 rounded-full border-2 border-[var(--avatarBorderColor)] object-cover shadow-lg"
                     style="--avatarBorderColor: rgba(80, 80, 80, 0.5);"
                     onerror="this.src='https://placehold.co/128x128/333333/FFFFFF?text=Turtles'; this.onerror=null;"/>
            </div>
            <div class="profile-text-content flex flex-col ml-0 md:ml-6 flex-grow items-start">
                <div class="flex flex-col items-start mb-1">
                    <h1 id="username" class="username-text typewriter-text text-glow text-[36px] font-semibold leading-[41px] mb-2" style="font-weight: 600;"></h1>
                    </div>
                <h3 id="description" class="description-text typewriter-text text-[var(--textColorDarker)] text-[17px] mb-1" style="font-weight: 570;"></h3>
                <h2 id="mainJoinDate" class="text-[var(--joinStatus)] text-[13px]" style="font-weight: 400;">joined ...</h2> </div>
        </div>

        <div id="roblox-widget-container" class="profile-widget w-full">
            <p id="robloxError" class="text-yellow-400 text-xs mb-2">Loading Roblox info...</p>
            <div id="roblox-widget-display" class="items-center hidden">
                <div class="flex items-center">
                    <div class="flex-shrink-0 mr-4">
                        <img id="robloxAvatarImg" alt="Roblox Avatar" class="w-16 h-16 rounded-md border border-gray-700 object-cover" 
                             src="https://placehold.co/64x64/1a1a1a/FFFFFF?text=RBLX" 
                             onerror="this.src='https://placehold.co/64x64/1a1a1a/FFFFFF?text=RBLX'; this.onerror=null;" />
                    </div>
                    <div class="flex-grow">
                        <h1 id="robloxUsername" class="text-lg font-medium" style="font-weight: 450;">Roblox User</h1>
                        <p id="robloxJoinDate" class="text-xs text-[var(--textColorDarker)]" style="font-weight: 400;">Joined: ---</p>
                        <p id="robloxUserDescription" class="roblox-description">Description: ---</p>
                        <h3 class="text-xs text-[var(--textColorDarker)] space-x-2 mt-1" style="font-weight: 450;">
                            <span id="robloxFriends">N/A Friends</span>
                            <span id="robloxFollowers">N/A Followers</span>
                        </h3>
                        <a id="robloxProfileLink" target="_blank" href="#" class="text-xs text-[var(--buttonUrlColor)] hover:underline mt-1 inline-block" style="font-weight: 450;">View Profile</a>
                    </div>
                    <span class="platform-tag ml-auto self-start text-xs px-2 py-1 rounded-md bg-black/40 text-[var(--textColorDarker)]">
                        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="inline-block align-middle mr-1"><path fill="currentColor" d="M18.926 23.998L0 18.892L5.075.002L24 5.108ZM15.348 10.09l-5.282-1.453l-1.414 5.273l5.282 1.453z"></path></svg>
                        Roblox
                    </span>
                </div>
            </div>
        </div>

        <div id="discord-widget-container" class="profile-widget w-full">
            <p id="discordError" class="text-yellow-400 text-xs mb-2">Loading Discord info...</p>
            <div id="discord-widget-display" class="items-center hidden">
                 <div class="flex items-center">
                    <div class="flex-shrink-0 mr-4 relative">
                        <img id="discordAvatarImg" alt="Discord Avatar" class="w-16 h-16 rounded-full border-2 border-gray-700 object-cover" 
                             src="https://placehold.co/64x64/5865F2/FFFFFF?text=DC"
                             onerror="this.src='https://placehold.co/64x64/5865F2/FFFFFF?text=DC'; this.onerror=null;" />
                        <span id="discordStatusDot" class="status-dot absolute bottom-0 right-0 border-2 border-gray-800"></span>
                    </div>
                    <div class="flex-grow">
                        <h1 id="discordUsername" class="text-lg font-medium" style="font-weight: 450;">Discord User</h1>
                        <p id="discordStatusText" class="text-xs text-[var(--textColorDarker)]" style="font-weight: 450;">Status: ---</p>
                        <p id="discordActivity" class="text-xs text-[var(--textColorDarker)] truncate" style="font-weight: 400;">Activity: ---</p>
                    </div>
                    <span class="platform-tag ml-auto self-start text-xs px-2 py-1 rounded-md bg-[#5865F2]/50 text-white">
                        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="inline-block align-middle mr-1"><path fill="currentColor" d="M20.317 4.369a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.249a18.278 18.278 0 0 0-5.484 0a12.941 12.941 0 0 0-.617-1.236a.075.075 0 0 0-.079-.038a19.719 19.719 0 0 0-4.885 1.515a.069.069 0 0 0-.032.027C.533 9.045-.319 13.579.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 2.906a.075.075 0 0 0 .084-.028a13.012 13.012 0 0 0 1.27-.866a.075.075 0 0 0-.019-.1a14.901 14.901 0 0 1-2.248-2.259a.075.075 0 0 1 .012-.118a.075.075 0 0 1 .062-.007c.041.014.081.027.122.042c1.167.554 2.524.903 3.92 1.072a.075.075 0 0 0 .079-.071V12.22a.075.075 0 0 0-.068-.075a10.36 10.36 0 0 1-1.875-.555a.075.075 0 0 1-.009-.118a.075.075 0 0 1 .076-.037c.091.019.181.035.27.051c1.322.264 2.686.372 4.062.372s2.74-.108 4.067-.372a10.19 10.19 0 0 1 .271-.051a.075.075 0 0 1 .075.037a.075.075 0 0 1-.009.118a10.414 10.414 0 0 1-1.875.555a.075.075 0 0 0-.068.075v6.05a.075.075 0 0 0 .079.071c1.397-.17 2.754-.518 3.92-1.072c.042-.015.082-.028.122-.042a.075.075 0 0 1 .062.006a.075.075 0 0 1 .012.118a14.904 14.904 0 0 1-2.249 2.259a.075.075 0 0 0-.019.1a13.093 13.093 0 0 0 1.27.866a.075.075 0 0 0 .084.028a19.901 19.901 0 0 0 5.993-2.906a.082.082 0 0 0 .031-.056c.501-5.177-.838-9.674-3.549-13.66a.069.069 0 0 0-.032-.027ZM8.02 15.33c-1.183 0-2.156-.99-2.156-2.209s.973-2.209 2.156-2.209c1.192 0 2.156.99 2.156 2.209s-.964 2.209-2.156 2.209Zm7.975 0c-1.183 0-2.156-.99-2.156-2.209s.973-2.209 2.156-2.209c1.192 0 2.156.99 2.156 2.209s-.964 2.209-2.156 2.209Z"></path></svg>
                        Discord
                    </span>
                </div>
            </div>
        </div>

        <div class="social-links-container flex justify-center space-x-2 sm:space-x-3 mb-8 w-full">
            <a href="https://open.spotify.com/user/loeuynzx5x1qy7ao1t3rd83v3" target="_blank" class="social-icon-link" title="Spotify">
                <img src="https://r2.guns.lol/2111cff3-3b43-4b94-b0d7-b4605582c8d6.webp" alt="Spotify" class="w-8 h-8 md:w-10 md:h-10 rounded-md object-cover" onerror="this.src='https://placehold.co/40x40/1DB954/FFFFFF?text=S'; this.onerror=null;"/>
            </a>
            <a href="https://tiktok.com/@turtlesiscoolio?lang=en" target="_blank" class="social-icon-link" title="TikTok">
                <img src="https://r2.guns.lol/ea98acf6-eb9b-4d7d-b042-07965099b0f3.webp" alt="TikTok" class="w-8 h-8 md:w-10 md:h-10 rounded-md object-cover" onerror="this.src='https://placehold.co/40x40/000000/FFFFFF?text=T'; this.onerror=null;"/>
            </a>
            <a href="https://roblox.com/users/438626383/profile" target="_blank" class="social-icon-link" title="Roblox Profile">
                <img src="https://r2.guns.lol/5d47e28f-0a6c-4e35-a53b-68cde6a6a3e7.webp" alt="Roblox" class="w-8 h-8 md:w-10 md:h-10 rounded-md object-cover" onerror="this.src='https://placehold.co/40x40/E02327/FFFFFF?text=R'; this.onerror=null;"/>
            </a>
        </div>

        <div class="footer-views absolute bottom-3 left-4 md:bottom-4 md:left-5">
            <span class="text-sm flex items-center text-[var(--textColorDarker)]" style="font-weight: 550;">
                <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="mr-1.5 w-5 h-5"><path fill="currentColor" d="M12 9a3 3 0 0 0-3 3a3 3 0 0 0 3 3a3 3 0 0 0 3-3a3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5a5 5 0 0 1 5-5a5 5 0 0 1 5 5a5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5"></path></svg>
                <span id="pageViews">0</span>
            </span>
        </div>
    </div>

    <script>
        // --- CONFIGURATION ---
        const ROBLOX_USER_ID = "438626383"; 
        const DISCORD_USER_ID = "416025539409739778"; 

        // Snowflake Animation
        const snowflakeContainer = document.getElementById('snowflake-container');
        const snowflakeChars = ['❅', '❆', '❄']; 
        function createSnowflake() {
            if (!snowflakeContainer) return;
            const snowflake = document.createElement('div');
            snowflake.classList.add('snowflake');
            snowflake.textContent = snowflakeChars[Math.floor(Math.random() * snowflakeChars.length)];
            snowflake.style.left = Math.random() * 100 + 'vw';
            snowflake.style.animationDuration = Math.random() * 7 + 8 + 's';
            snowflake.style.opacity = Math.random() * 0.3 + 0.3; // Adjusted opacity for snowflakes
            snowflake.style.fontSize = Math.random() * 1 + 0.5 + 'rem';
            snowflakeContainer.appendChild(snowflake);
            setTimeout(() => { snowflake.remove(); }, 15000);
        }
        if (window.innerWidth > 768) { setInterval(createSnowflake, 350); } // Slightly more frequent

        // Typewriter Effect
        function typewriterEffect(element, texts, options = {}) {
            if (!element || !texts || texts.length === 0) return;
            let currentTextIndex = 0;
            let currentCharIndex = 0;
            let isDeleting = false;
            const speed = options.speed || 120;
            const deleteSpeed = options.deleteSpeed || 60;
            const delayBetweenTexts = options.delayBetweenTexts || 2500;

            let textNode = element.firstChild;
            let cursorSpan = element.querySelector('.cursor');

            if (!cursorSpan) {
                cursorSpan = document.createElement('span');
                cursorSpan.className = 'cursor';
                element.appendChild(cursorSpan);
            }
            
            if (!textNode || textNode === cursorSpan) {
                textNode = document.createTextNode('');
                element.insertBefore(textNode, cursorSpan);
            }
            
            function type() {
                const currentText = texts[currentTextIndex];
                if (textNode) textNode.nodeValue = currentText.substring(0, currentCharIndex);

                if (!isDeleting && currentCharIndex < currentText.length) {
                    currentCharIndex++;
                    setTimeout(type, speed);
                } else if (isDeleting && currentCharIndex > 0) {
                    currentCharIndex--;
                    setTimeout(type, deleteSpeed);
                } else if (!isDeleting && currentCharIndex === currentText.length) {
                    isDeleting = true;
                    setTimeout(type, delayBetweenTexts);
                } else if (isDeleting && currentCharIndex === 0) {
                    isDeleting = false;
                    currentTextIndex = (currentTextIndex + 1) % texts.length;
                    setTimeout(type, speed);
                }
            }
            type();
        }

        // Page Entry Text
        const pageEntryText = document.getElementById('page-entry-text');
        if (pageEntryText) { setTimeout(() => { pageEntryText.style.display = 'none'; }, 3000); }

        // Page Views Counter
        const viewsElement = document.getElementById('pageViews');
        if (viewsElement) {
            let globalViewCount = parseInt(localStorage.getItem('turtlesBioGlobalViewCount') || '0');
            if (!sessionStorage.getItem('turtlesBioSessionVisited')) {
                globalViewCount++;
                localStorage.setItem('turtlesBioGlobalViewCount', globalViewCount.toString());
                sessionStorage.setItem('turtlesBioSessionVisited', 'true');
            }
            viewsElement.textContent = globalViewCount;
        }

        // DOM Elements
        const robloxWidgetDisplay = document.getElementById('roblox-widget-display');
        const robloxAvatarImg = document.getElementById('robloxAvatarImg');
        const robloxUsernameEl = document.getElementById('robloxUsername');
        const robloxProfileLink = document.getElementById('robloxProfileLink');
        const robloxJoinDateEl = document.getElementById('robloxJoinDate');
        const robloxUserDescriptionEl = document.getElementById('robloxUserDescription');
        const robloxErrorEl = document.getElementById('robloxError');
        const mainJoinDateEl = document.getElementById('mainJoinDate');


        const discordWidgetDisplay = document.getElementById('discord-widget-display');
        const discordAvatarImg = document.getElementById('discordAvatarImg');
        const discordUsernameEl = document.getElementById('discordUsername');
        const discordStatusTextEl = document.getElementById('discordStatusText');
        const discordActivityEl = document.getElementById('discordActivity');
        const discordStatusDot = document.getElementById('discordStatusDot');
        const discordErrorEl = document.getElementById('discordError');

        // --- Function to Format Date ---
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return new Date(dateString).toLocaleDateString(undefined, options);
        }
        
        function timeAgo(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const seconds = Math.round((now - date) / 1000);
            const minutes = Math.round(seconds / 60);
            const hours = Math.round(minutes / 60);
            const days = Math.round(hours / 24);
            const months = Math.round(days / 30.44); // Average days in month
            const years = Math.round(days / 365.25);

            if (seconds < 60) return `${seconds} seconds ago`;
            if (minutes < 60) return `${minutes} minutes ago`;
            if (hours < 24) return `${hours} hours ago`;
            if (days < 30) return `${days} days ago`;
            if (months < 12) return `${months} months ago`;
            return `${years} years ago`;
        }


        // --- Function to Fetch Roblox Data ---
        async function fetchRobloxData(userId) {
            if (!userId || !robloxWidgetDisplay) {
                if(robloxErrorEl) robloxErrorEl.textContent = "Roblox User ID not configured or widget not found.";
                return;
            }
            
            robloxWidgetDisplay.classList.remove('hidden'); 
            if(robloxUsernameEl) robloxUsernameEl.textContent = "Loading...";
            if(robloxErrorEl) robloxErrorEl.textContent = "Fetching Roblox data...";

            if(robloxAvatarImg) {
                robloxAvatarImg.src = `https://thumbnails.roblox.com/v1/users/avatar-headshot?userIds=${userId}&size=150x150&format=Png&isCircular=false`;
                robloxAvatarImg.onerror = () => { 
                    robloxAvatarImg.src='https://placehold.co/64x64/1a1a1a/FFFFFF?text=Error';
                    if (robloxErrorEl && robloxErrorEl.textContent.includes("Fetching")) {
                       robloxErrorEl.textContent = "Could not load avatar.";
                    }
                };
            }
            if(robloxProfileLink) robloxProfileLink.href = `https://www.roblox.com/users/${userId}/profile`;
            
            const robloxApiUrl = `https://users.roblox.com/v1/users/${userId}`;
            // Using a more specific proxy that returns JSON directly if possible, or fallback to allorigins
            const proxyUrl = `https://api.roproxy.com/users/v1/users/${userId}`; // Alternative: `https://users.robloxrpc.com/v1/users/${userId}`
                                                                              // Fallback: `https://api.allorigins.win/raw?url=${encodeURIComponent(robloxApiUrl)}`
            try {
                let response = await fetch(proxyUrl);
                if (!response.ok) { // If roproxy fails, try allorigins
                    console.warn(`Roproxy failed (${response.status}), trying allorigins...`);
                    const fallbackProxyUrl = `https://api.allorigins.win/raw?url=${encodeURIComponent(robloxApiUrl)}`;
                    response = await fetch(fallbackProxyUrl);
                }

                if (!response.ok) {
                    let errorMsg = `Error fetching from Roblox via proxy: ${response.status}`;
                     try { const errorData = await response.json(); if (errorData && errorData.errors && errorData.errors[0] && errorData.errors[0].message) { errorMsg = `Roblox API Error: ${errorData.errors[0].message}`; } else if (typeof errorData === 'string' && errorData.length < 200) { errorMsg = `Roblox API Error: ${errorData}`; } } catch (e) { /* Ignore */ }
                    throw new Error(errorMsg);
                }
                const data = await response.json();

                if (data.id) {
                    if(robloxUsernameEl) robloxUsernameEl.textContent = data.displayName || data.name || "Roblox User";
                    if(robloxJoinDateEl) robloxJoinDateEl.textContent = `Joined: ${formatDate(data.created)}`;
                    if(robloxUserDescriptionEl) robloxUserDescriptionEl.textContent = data.description || "No description set.";
                    if(robloxErrorEl) robloxErrorEl.textContent = ""; 
                    if(mainJoinDateEl) mainJoinDateEl.textContent = `joined ${timeAgo(data.created)}`;

                } else {
                    if(robloxUsernameEl) robloxUsernameEl.textContent = "User Info N/A";
                    if(robloxErrorEl) robloxErrorEl.textContent = (data.errors && data.errors[0] ? data.errors[0].message : "Roblox user data not found or invalid response.");
                    if(mainJoinDateEl) mainJoinDateEl.textContent = "joined ...";
                }
            } catch (error) {
                console.error("Error fetching Roblox user data:", error);
                if(robloxUsernameEl) robloxUsernameEl.textContent = "User Not Found";
                if(robloxErrorEl) robloxErrorEl.textContent = error.message || "Could not fetch Roblox username.";
                if(mainJoinDateEl) mainJoinDateEl.textContent = "joined ...";

            }
        }

        // --- Function to Fetch Discord Data ---
        async function fetchDiscordData(userId) {
            if (!userId || !discordWidgetDisplay) {
                if(discordErrorEl) discordErrorEl.textContent = "Discord User ID not configured or widget not found.";
                return;
            }

            discordWidgetDisplay.classList.remove('hidden'); 
            if(discordUsernameEl) discordUsernameEl.textContent = "Loading...";
            if(discordErrorEl) discordErrorEl.textContent = "Fetching Discord data...";

            try {
                const response = await fetch(`https://api.lanyard.rest/v1/users/${userId}`);
                if (!response.ok) {
                     const errorData = await response.json();
                     throw new Error(errorData.message || `Lanyard API error: ${response.status}`);
                }
                const data = await response.json();

                if (data.success && data.data) {
                    const discordData = data.data;
                    if(discordErrorEl) discordErrorEl.textContent = ""; 

                    if(discordAvatarImg) {
                        discordAvatarImg.src = `https://cdn.discordapp.com/avatars/${discordData.discord_user.id}/${discordData.discord_user.avatar}.png?size=128`;
                        discordAvatarImg.onerror = () => { discordAvatarImg.src='https://placehold.co/64x64/5865F2/FFFFFF?text=Error'; };
                    }
                    if(discordUsernameEl) discordUsernameEl.textContent = discordData.discord_user.global_name || discordData.discord_user.username;
                    
                    if(discordStatusDot) {
                        discordStatusDot.className = 'status-dot absolute bottom-0 right-0 border-2 border-gray-800'; 
                        discordStatusDot.classList.add(`status-${discordData.discord_status}`);
                    }
                    if(discordStatusTextEl) discordStatusTextEl.textContent = `Status: ${discordData.discord_status.charAt(0).toUpperCase() + discordData.discord_status.slice(1)}`;

                    let activityText = "No activity";
                    if (discordData.activities && discordData.activities.length > 0) {
                        const mainActivity = discordData.activities.find(act => act.type === 0 || act.type === 2) || discordData.activities[0]; 
                        if (mainActivity) {
                            activityText = `${mainActivity.name}`;
                            if (mainActivity.details) activityText += ` - ${mainActivity.details}`;
                            if (mainActivity.state) activityText += ` (${mainActivity.state})`;
                        }
                    }
                    if(discordActivityEl) {
                        discordActivityEl.textContent = `Activity: ${activityText}`;
                        discordActivityEl.title = `Activity: ${activityText}`;
                    }
                } else {
                    throw new Error(data.message || "User not found or Lanyard API error.");
                }
            } catch (error) {
                console.error("Error fetching Discord data via Lanyard:", error);
                if(discordErrorEl) discordErrorEl.textContent = error.message || "Could not fetch Discord data.";
                if(discordWidgetDisplay) discordWidgetDisplay.classList.add('hidden'); 
            }
        }

        // --- Initialize Page ---
        document.addEventListener('DOMContentLoaded', () => {
            const usernameElement = document.getElementById('username');
            if (usernameElement) {
                typewriterEffect(usernameElement, ["Turtles"], { speed: 150, deleteSpeed: 100, delayBetweenTexts: 10000 });
            }
            const descriptionElement = document.getElementById('description');
            if (descriptionElement) {
                typewriterEffect(descriptionElement, ["I love my girlfriend", "Roblox UI Designer"], { speed: 70, deleteSpeed: 40, delayBetweenTexts: 3000 });
            }

            if (ROBLOX_USER_ID) {
                fetchRobloxData(ROBLOX_USER_ID);
            } else {
                if(robloxErrorEl) robloxErrorEl.textContent = "Roblox User ID not set.";
                if(robloxWidgetDisplay) robloxWidgetDisplay.classList.add('hidden');
            }

            if (DISCORD_USER_ID) {
                fetchDiscordData(DISCORD_USER_ID);
            } else {
                if(discordErrorEl) discordErrorEl.textContent = "Discord User ID not set.";
                if(discordWidgetDisplay) discordWidgetDisplay.classList.add('hidden');
            }
        });

    </script>
</body>
</html>
